(()=>{"use strict";var e,t={6331:(e,t,o)=>{var n=o(5893),i=o(4300),r=o(7294),s=o(3935),a=o(9704),d=o(105),c=o(8527);const l=e=>{const t=(0,d.mq)("Logo");return(0,n.jsx)(c.M5,Object.assign({__css:t},e,{children:"Sterling"}),void 0)},p=e=>{const t=(0,d.mq)("NavBar");return(0,n.jsx)(c.kC,Object.assign({__css:t},e),void 0)};var u=o(8921);const v=e=>{const t=(0,d.mq)("NavButton");return(0,n.jsx)(u.zx,Object.assign({__css:t},e),void 0)},g=e=>{const t=(0,d.mq)("SideBar");return(0,n.jsx)(c.kC,Object.assign({__css:t},e),void 0)};const h=e=>{const{text:t}=e,o=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(o[n[i]]=e[n[i]])}return o}(e,["text"]),i=(0,d.mq)("SideBarButton");return(0,n.jsx)(u.zx,Object.assign({as:"div",__css:i,iconSpacing:"0.25rem"},o,{children:(0,n.jsx)(c.xv,Object.assign({transform:"rotate(180deg)",userSelect:"none",cursor:"pointer"},{children:t}),void 0)}),void 0)},x=e=>{const t=(0,d.mq)("StatusBar");return(0,n.jsx)(c.kC,Object.assign({__css:t},e),void 0)},f=e=>{const t=(0,d.mq)("View");return(0,n.jsx)(c.xu,Object.assign({__css:t},e),void 0)},j=(0,i.B1C)({styles:{global:{"html, body, #root":{w:"full",h:"full",overflow:"hidden"}}},components:{Logo:{baseStyle:{p:2,fontWeight:"black",fontSize:"lg"}},NavBar:{baseStyle:{h:"50px",position:"fixed",top:0,left:0,right:0,display:"flex",alignItems:"stretch",borderBottom:"1px",borderColor:"gray.200",shadow:"base",p:2,bg:"gray.50"}},NavButton:{baseStyle:{display:"flex",alignItems:"center",borderRadius:"sm",px:4,lineHeight:1.2,fontSize:"sm",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_hover:{bg:"gray.100",_disabled:{bg:"initial"}},_active:{bg:"gray.200"},_disabled:{opacity:.4,cursor:"not-allowed"}}},SideBar:{baseStyle:{w:"27px",position:"fixed",top:"50px",left:0,bottom:0,display:"flex",flexDir:"column",alignItems:"stretch",fontSize:"xs",borderRight:"1px",borderColor:"gray.300",bg:"gray.100"}},SideBarButton:{baseStyle:{display:"flex",cursor:"pointer",alignItems:"center",py:2,lineHeight:1.2,fontSize:"xs",fontWeight:"medium",letterSpacing:"tight",transitionProperty:"common",transitionDuration:"normal",writingMode:"vertical-lr",textOrientation:"sideways",_hover:{bg:"gray.200",_disabled:{bg:"initial"}},_active:{bg:"gray.300"}}},StatusBar:{baseStyle:{h:"20px",position:"fixed",right:0,bottom:0,left:0,display:"flex",alignItems:"center",px:2,fontSize:"xs",borderTop:"1px",borderColor:"gray.300",bg:"gray.100"}},View:{baseStyle:{position:"fixed",top:"50px",right:0,bottom:"20px",left:"27px",display:"flex"}}}});var m=o(109),y=o(8452);const b={stroke:"#333",strokeWidth:1,fill:"none"},w={style:{fill:"#777",fontFamily:"monospace",fontSize:"10px",textAnchor:"middle",userSelect:"none",cursor:"pointer"},props:{dy:"0.4em"}},S={shape:"circle",radius:10},O={stroke:"#ddd",strokeWidth:1,fill:"#ddd",cursor:"pointer"},C={style:{fontFamily:"monospace",fontSize:"10px",textAnchor:"middle",userSelect:"none",cursor:"pointer"},props:{dy:"0.4em"}},P={stroke:"#333",strokeWidth:1,fill:"white",cursor:"pointer"},I=e=>{const{numStates:t,loopBack:o,selectedIndices:i,onSelectedIndicesDidChange:s}=e,{graph:a,edgePaths:d}=(0,r.useMemo)((()=>function(e,t){const o=[],n=[],i={},r=-50*(e-1)/2;for(let s=0;s<e;++s)if(o.push({id:`${s}`,x:r+50*s,y:5}),s<e-1)n.push({id:`${s}->${s+1}`,source:`${s}`,target:`${s+1}`});else{const e=`${s}->${t}`,o=r+50*t;n.push({id:e,source:`${s}`,target:`${t}`}),i[e]={type:"line",waypoints:[{x:r+50*s-15,y:-15},{x:o+15,y:-15}]}}return{graph:(0,y.VW)(o,n),edgePaths:i}}(t,o)),[t,o]),c=(0,r.useMemo)((()=>function(e,t){const o={};return(0,y.v$)(e).forEach((e=>{o[e.id]=t.includes(+e.id)?[Object.assign({text:e.id},C)]:[Object.assign({text:e.id},w)]})),o}(a,i)),[a,i]);return(0,n.jsx)(m.QR,{graph:a,nodeLabels:c,defaultEdgeStyle:b,defaultEdgeStyleHovered:{},defaultNodeStyle:O,defaultNodeStyleSelected:P,defaultShape:S,edgePaths:d,onSelectionDidUpdate:e=>{s&&s(e.map((e=>+e)))},interactions:!0},void 0)};var k=o(4399);const V=(0,k.PH)("sterling/buttonClicked"),_=(0,k.PH)("sterling/dataRequested"),B=(0,k.PH)("sterling/evalRequested"),E=(0,k.PH)("sterling/metaRequested"),H=(0,k.PH)("sterling/dataReceived"),N=(0,k.PH)("sterling/evalReceived"),R=(0,k.PH)("sterling/metaReceived"),z=(0,k.PH)("sterling/connect"),D=(0,k.PH)("sterling/disconnect"),$=(0,k.PH)("sterling/connected"),M=(0,k.PH)("sterling/connectionError"),T=(0,k.PH)("sterling/disconnected"),L=(0,k.PH)("sterling/error");function F(e){e.dispatch(L("Not connected to a provider."))}function q(e,t){console.log(`SEND: ${t}`),e.send(JSON.stringify(t))}function W(){let e=null,t=0;const o=()=>{window.clearInterval(t),t=0},n=()=>{e&&e.close()},i=()=>{e&&e.send("ping")},r=(s,a)=>{const d=s.dispatch;e&&n(),a=a||`ws://localhost:${window.location.search.slice(1)}`,console.log(a),e=new WebSocket(a);const c=()=>{o(),t=window.setInterval((()=>r(s,a)),1e3)};e.onopen=()=>{window.setTimeout((()=>i()),3e3),d($()),o()},e.onclose=()=>{d(T()),c()},e.onerror=t=>{d(M(t.type)),e&&e.readyState===WebSocket.CLOSED&&c()},e.onmessage=e=>{"pong"===e.data?window.setTimeout((()=>i()),3e3):function(e,t){console.log(`Receive: ${e}`);const o=function(e){return JSON.parse(e)}(e);!function(e){return"data"===e.type&&void 0!==e.payload}(o)?function(e){return"eval"===e.type&&void 0!==e.payload}(o)?t.dispatch(N(o.payload)):function(e){return"meta"===e.type&&void 0!==e.payload}(o)&&t.dispatch(R(o.payload)):t.dispatch(H(o.payload))}(e.data,s)}};return t=>o=>i=>(z.match(i)?r(t,i.payload):D.match(i)?n():V.match(i)?function(e,t,o){if(!e)return F(t);q(e,function(e,t){return{type:"click",version:1,payload:t}}(0,o))}(e,t,i.payload):_.match(i)?function(e,t){if(!e)return F(t);q(e,{type:"data",version:1})}(e,t):B.match(i)?function(e,t,o){if(!e)return F(t);q(e,function(e,t){return{type:"eval",version:1,payload:t}}(0,o))}(e,t,i.payload):E.match(i)&&function(e,t){if(!e)return F(t);q(e,{type:"meta",version:1})}(e,t),o(i))}const J=()=>(0,a.I0)(),A=a.v9;var G=o(573);const Z=(0,k.oM)({name:"data",initialState:{trace:void 0,selectedInstances:[]},reducers:{selectedInstancesChanged(e,t){e.selectedInstances=t.payload}},extraReducers:e=>{e.addCase(H,((e,t)=>{console.log("TODO: Handle data joins")}))}}),{selectedInstancesChanged:Q}=Z.actions,U=Z.reducer,K=(0,k.oM)({name:"graphView",initialState:{graphs:[],paths:[],styles:[]},reducers:{},extraReducers:e=>{e.addCase(H,((e,t)=>{}))}}),{}=K.actions,X=K.reducer,Y=(0,k.oM)({name:"provider",initialState:{connected:!1,providerName:"unknown provider"},reducers:{},extraReducers:e=>{e.addCase(R,((e,t)=>{const{name:o}=t.payload;e.providerName=o||"unknown provider"})).addCase($,(e=>{e.connected=!0})).addCase(T,(e=>{e.connected=!1}))}}),{}=Y.actions,ee=Y.reducer,te={mainView:"GraphView"};const oe=(0,k.oM)({name:"ui-base",initialState:te,reducers:{mainViewChanged(e,t){e.mainView=t.payload}}}),{mainViewChanged:ne}=oe.actions,ie=oe.reducer,re=(0,k.xC)({reducer:{data:U,graphView:X,provider:ee,ui:ie},middleware:e=>e().prepend(W(),(e=>t=>o=>{if(!$.match(o))return t(o);t(o),e.dispatch(E()),e.dispatch(_())}))}),se=e=>(e=>e.selectedInstances)(e.data),ae=e=>(e=>e.trace?e.trace.instances.length:0)(e.data),de=e=>(e=>e.trace?e.trace.loopBack:0)(e.data),ce=e=>(e=>e.connected)(e.provider),le=e=>(e=>e.providerName)(e.provider),pe=e=>(e=>e.mainView)(e.ui),ue=(0,G.P1)([se,e=>(e=>e.graphs)(e.graphView)],((e,t)=>{const o=[];return e.forEach((e=>o.push(t[e]))),o})),ve=(0,G.P1)([se,e=>(e=>e.paths)(e.graphView)],((e,t)=>{const o=[];return e.forEach((e=>o.push(t[e]))),o})),ge=(0,G.P1)([se,e=>(e=>e.styles)(e.graphView)],((e,t)=>{const o=[];return e.forEach((e=>o.push(t[e]))),o})),he=()=>{const e=J(),t=A(ae),o=A(de),i=A(se);return(0,n.jsx)(c.xu,Object.assign({width:"full",my:"-8px"},{children:(0,n.jsx)(I,{numStates:t,loopBack:o,selectedIndices:i,onSelectedIndicesDidChange:t=>{e(Q(t))}},void 0)}),void 0)};var xe=o(2078);const fe=()=>{const e=J(),t=A(pe);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v,Object.assign({isActive:"GraphView"===t,mr:1,leftIcon:(0,n.jsx)(xe.JO,{icon:"graph"},void 0),onClick:()=>e(ne("GraphView"))},{children:"Graph"}),void 0),(0,n.jsx)(v,Object.assign({isActive:"TableView"===t,mr:1,leftIcon:(0,n.jsx)(xe.JO,{icon:"th"},void 0),onClick:()=>e(ne("TableView"))},{children:"Table"}),void 0),(0,n.jsx)(v,Object.assign({isActive:"ScriptView"===t,mr:1,leftIcon:(0,n.jsx)(xe.JO,{icon:"code"},void 0),onClick:()=>e(ne("ScriptView"))},{children:"Script"}),void 0)]},void 0)},je=()=>(0,n.jsxs)(p,{children:[(0,n.jsx)(l,{},void 0),(0,n.jsx)(c.iz,{orientation:"vertical",mx:2},void 0),(0,n.jsx)(fe,{},void 0),(0,n.jsx)(c.iz,{orientation:"vertical",mx:2},void 0),(0,n.jsx)(he,{},void 0),(0,n.jsx)(c.LZ,{},void 0)]},void 0);var me=o(6653),ye=o(5434),be=o(155);const we=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h,{text:"Theme",rightIcon:(0,n.jsx)(ye.CZl,{},void 0)},void 0),(0,n.jsx)(h,{text:"Layout",rightIcon:(0,n.jsx)(ye.df2,{},void 0)},void 0),(0,n.jsx)(h,{text:"Settings",rightIcon:(0,n.jsx)(be.Fuo,{},void 0)},void 0)]},void 0),Se=()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(h,{text:"Settings",rightIcon:(0,n.jsx)(be.Fuo,{},void 0)},void 0)},void 0),Oe=()=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(h,{text:"Settings",rightIcon:(0,n.jsx)(be.Fuo,{},void 0)},void 0)},void 0),Ce=()=>{const e=A(pe);return(0,n.jsxs)(g,{children:[(0,n.jsx)(h,{text:"Data",rightIcon:(0,n.jsx)(ye.wLg,{},void 0)},void 0),(0,n.jsx)(h,{text:"Evaluator",rightIcon:(0,n.jsx)(me.RJr,{},void 0)},void 0),(0,n.jsx)(c.iz,{borderBottomWidth:4},void 0),"GraphView"===e&&(0,n.jsx)(we,{},void 0),"TableView"===e&&(0,n.jsx)(Oe,{},void 0),"ScriptView"===e&&(0,n.jsx)(Se,{},void 0)]},void 0)};var Pe=o(5707),Ie=o(894);const ke=e=>{const{isConnected:t}=e,o=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(o[n[i]]=e[n[i]])}return o}(e,["isConnected"]),i=t?"green.500":"red.500";return(0,n.jsx)(Ie.JO,Object.assign({as:me.DcD,color:i},o),void 0)},Ve=e=>{const t=A(ce),o=A(le),i=t?`Connected to ${o}`:"Not connected to a provider",r=t?"Connected":"Disconnected";return(0,n.jsx)(Pe.u,Object.assign({hasArrow:!0,label:i},{children:(0,n.jsxs)(c.M5,Object.assign({},e,{children:[(0,n.jsx)(ke,{isConnected:t},void 0),(0,n.jsx)(c.xv,Object.assign({mx:1,userSelect:"none"},{children:r}),void 0)]}),void 0)}),void 0)},_e=()=>(0,n.jsxs)(x,{children:[(0,n.jsx)(c.LZ,{},void 0),(0,n.jsx)(c.iz,{orientation:"vertical",mx:2},void 0),(0,n.jsx)(Ve,{},void 0)]},void 0),Be={shape:"rectangle",width:120,height:65},Ee={fill:"gold",stroke:"#333"},He=()=>{const e=A(ue),t=A(ve),o=A(ge);return(0,n.jsx)(f,Object.assign({flexDir:"row"},{children:e.map(((e,i)=>{const r=o[i],s=t[i];return(0,n.jsx)(m.QR,{graph:e,defaultShape:Be,defaultNodeStyle:Ee,nodeLabels:r.nodeLabels,edgeLabels:r.edgeLabels,edgeStyles:r.edgeStyles,edgePaths:s,interactions:!0},i)}))}),void 0)},Ne=()=>(0,n.jsx)(f,{children:"Script View"},void 0),Re=()=>(0,n.jsx)(f,{children:"Table View"},void 0);s.render((0,n.jsx)(r.StrictMode,{children:(0,n.jsx)(i.xjn,Object.assign({theme:j},{children:(0,n.jsx)(a.zt,Object.assign({store:re},{children:(0,n.jsx)((e=>{const{url:t}=e,o=J(),i=A(pe);return(0,r.useEffect)((()=>(o(z(t)),()=>{o(D())})),[t,o]),(0,n.jsxs)(n.Fragment,{children:["GraphView"===i&&(0,n.jsx)(He,{},void 0),"TableView"===i&&(0,n.jsx)(Re,{},void 0),"ScriptView"===i&&(0,n.jsx)(Ne,{},void 0),(0,n.jsx)(Ce,{},void 0),(0,n.jsx)(je,{},void 0),(0,n.jsx)(_e,{},void 0)]},void 0)}),{url:void 0},void 0)}),void 0)}),void 0)},void 0),document.getElementById("root"))}},o={};function n(e){var i=o[e];if(void 0!==i)return i.exports;var r=o[e]={id:e,loaded:!1,exports:{}};return t[e](r,r.exports,n),r.loaded=!0,r.exports}n.m=t,e=[],n.O=(t,o,i,r)=>{if(!o){var s=1/0;for(l=0;l<e.length;l++){for(var[o,i,r]=e[l],a=!0,d=0;d<o.length;d++)(!1&r||s>=r)&&Object.keys(n.O).every((e=>n.O[e](o[d])))?o.splice(d--,1):(a=!1,r<s&&(s=r));if(a){e.splice(l--,1);var c=i();void 0!==c&&(t=c)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[o,i,r]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var i,r,[s,a,d]=o,c=0;if(s.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(d)var l=d(n)}for(t&&t(o);c<s.length;c++)r=s[c],n.o(e,r)&&e[r]&&e[r][0](),e[s[c]]=0;return n.O(l)},o=self.webpackChunksterling_ts=self.webpackChunksterling_ts||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var i=n.O(void 0,[846],(()=>n(6331)));i=n.O(i)})();